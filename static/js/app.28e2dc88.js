(function(t){function e(e){for(var r,s,i=e[0],c=e[1],u=e[2],d=0,f=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},a={app:0},o=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/static/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1a39":function(t,e,n){"use strict";n("a2cc")},"1c7d":function(t,e,n){},"1f84":function(t,e,n){},"39af":function(t,e,n){},4073:function(t,e,n){"use strict";n("1c7d")},"4a4e":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("Header"),n("v-main",[n("router-view")],1),n("Footer")],1)},o=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-app-bar",{attrs:{app:"",dark:""}},[n("div",{staticClass:"d-flex align-center"},[n("router-link",{staticClass:"header_title",attrs:{to:"/"}},[n("v-app-bar-title",[t._v("Mot's Diary")])],1)],1),n("v-spacer"),t.getIsLoggedIn()?n("small",[t._v(t._s(t.getUsername())+"としてログインしています")]):t._e(),t.getIsLoggedIn()?t._e():n("router-link",{attrs:{to:"/login",tag:"button"}},[t._v("ログイン")]),t.getIsLoggedIn()?n("router-link",{attrs:{to:"/article/post",tag:"button"}},[t._v("投稿")]):t._e(),t.getIsLoggedIn()?n("v-btn",{on:{click:t.clickLogout}},[t._v("ログアウト")]):t._e()],1)],1)},i=[],c={data:function(){return{username:"",isLoggedIn:!1}},methods:{clickLogout:function(){this.$store.dispatch("logout")},getIsLoggedIn:function(){return this.isLoggedIn=this.$store.getters.isLoggedIn,this.isLoggedIn},getUsername:function(){if(this.isLoggedIn)return this.username=this.$store.getters.username,this.username}}},u=c,l=(n("4073"),n("2877")),d=n("6544"),f=n.n(d),p=n("40dc"),m=n("bb78"),g=n("8336"),v=n("2fa4"),h=Object(l["a"])(u,s,i,!1,null,"1e049d38",null),b=h.exports;f()(h,{VAppBar:p["a"],VAppBarTitle:m["a"],VBtn:g["a"],VSpacer:v["a"]});var _=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-footer",{attrs:{dark:""}},[n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[t._v(" "+t._s((new Date).getFullYear())+" - "),n("strong",[t._v("Mot's Diary")])])],1)},I=[],w=(n("8107"),n("62ad")),x=n("553a"),$={},V=Object(l["a"])($,_,I,!1,null,"27e4f365",null),y=V.exports;f()(V,{VCol:w["a"],VFooter:x["a"]});var L={components:{Header:b,Footer:y}},j=L,k=(n("a308"),n("7496")),C=n("f6c4"),O=Object(l["a"])(j,a,o,!1,null,"5e0d762e",null),A=O.exports;f()(O,{VApp:k["a"],VMain:C["a"]});var E=n("8c4f"),F=n("2f62"),S=(n("d3b7"),n("bc3a")),M=n.n(S),D=M.a.create({baseURL:"/api/v1",timeout:5e3,headers:{"Content-type":"application/json","X-Requested-With":"XMLHttpRequest"}});D.interceptors.request.use((function(t){var e=localStorage.getItem("access");return e?(t.headers.Authorization="JWT "+e,t):t}),(function(t){return Promise.reject(t)}));var P=D;r["default"].use(F["a"]);var T=new F["a"].Store({strict:!1,state:{userId:0,username:"",isLoggedIn:!1},getters:{userId:function(t){return t.userId},username:function(t){return t.username},isLoggedIn:function(t){return t.isLoggedIn}},mutations:{set:function(t,e){t.userId=e.user.id,t.username=e.user.username,t.isLoggedIn=!0},clear:function(t){t.userId=0,t.username="",t.isLoggedIn=!1}},actions:{login:function(t,e){return P.post("/auth/jwt/create/",{username:e.username,password:e.password}).then((function(e){return console.log(e),localStorage.setItem("access",e.data.access),t.dispatch("reload").then((function(t){return t}))}))},logout:function(t){localStorage.removeItem("access"),t.commit("clear")},reload:function(t){return P.get("/auth/users/me/").then((function(e){var n=e.data;return t.commit("set",{user:n}),n}))}}}),R=T,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-row",[n("v-col",{staticClass:"d-flex flex-wrap",attrs:{cols:"8"}},t._l(t.blogs,(function(t,e){return n("Article",{key:e,staticClass:"article",attrs:{article:t}})})),1),n("v-col",{attrs:{cols:"4"}},[n("Introduction")],1)],1)],1)},q=[],H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("router-link",{staticClass:"article_item",attrs:{to:{name:"detail",params:{id:t.article.id}}}},[n("v-card",{staticClass:"mx-3 mb-5"},[n("v-img",{attrs:{height:"250",src:"https://cdn.vuetifyjs.com/images/cards/cooking.png"}}),n("v-card-title",[t._v(t._s(t.article.title))])],1)],1)],1)},J=[],U={props:["article"]},W=U,X=(n("1a39"),n("b0af")),Y=n("99d9"),z=n("adda"),G=Object(l["a"])(W,H,J,!1,null,"02025d8e",null),K=G.exports;f()(G,{VCard:X["a"],VCardTitle:Y["a"],VImg:z["a"]});var N=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Q=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"introduction"}},[n("h3",{attrs:{id:"name"}},[t._v("野中元哉")]),n("div",{attrs:{id:"content"}},[n("p",[t._v("物理学科に在籍する大学生。素粒子の研究を志し日々勉強しています。")]),n("p",[t._v("Web開発にも興味があり、Django, Ruby on Rails, Vue.jsなどを勉強中")])])])}],Z=(n("e7e5"),{}),tt=Object(l["a"])(Z,N,Q,!1,null,"6e15d1a0",null),et=tt.exports,nt={components:{Article:K,Introduction:et},data:function(){return{blogs:[]}},created:function(){var t=this;P.get("blog/").then((function(e){t.blogs=e.data}))}},rt=nt,at=(n("eea4"),n("a523")),ot=n("0fd9"),st=Object(l["a"])(rt,B,q,!1,null,"222df3ab",null),it=st.exports;f()(st,{VCol:w["a"],VContainer:at["a"],VRow:ot["a"]});var ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"9",id:"content"}},[t.isLoggedIn?n("v-btn",{staticClass:"right floated",on:{click:function(e){return e.preventDefault(),t.deleteArticle(e)}}},[t._v(" 削除 ")]):t._e(),t.isLoggedIn?n("router-link",{attrs:{to:{name:"update",params:{id:t.article.id}}}},[t._v(" 編集 ")]):t._e(),n("small",[t._v(t._s(t.updated_at.getFullYear()+"/"+(t.updated_at.getMonth()+1)+"/"+t.updated_at.getDate()))]),n("h1",{attrs:{id:"content_title"}},[t._v(t._s(t.article.title))]),n("markdown-it-vue",{staticClass:"md-body",attrs:{content:t.article.content}})],1),n("v-col",{attrs:{cols:"3"}},[n("introduction")],1)],1)],1)},ut=[],lt=(n("ac1f"),n("5319"),n("48cd")),dt=n.n(lt),ft={components:{Introduction:et,MarkdownItVue:dt.a},data:function(){return{isLoggedIn:!1,article:{},updated_at:null}},methods:{getArticle:function(){var t=this;P.get("/blog/"+this.$route.params.id).then((function(e){t.article=e.data,console.log(t.article),t.updated_at=new Date(t.article.updated_at)}))},deleteArticle:function(){var t=this;window.confirm("本当に削除しますか？")&&P.delete("/blog/"+this.$route.params.id).then((function(){t.$router.replace("/")}))}},created:function(){this.isLoggedIn=this.$store.getters.isLoggedIn,this.getArticle()}},pt=ft,mt=(n("c0d8"),Object(l["a"])(pt,ct,ut,!1,null,null,null)),gt=mt.exports;f()(mt,{VBtn:g["a"],VCol:w["a"],VContainer:at["a"],VRow:ot["a"]});var vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("ArticleForm",{attrs:{form:t.form},on:{submit:function(e){return t.postArticle()}}})],1)},ht=[],bt=(n("f417"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{on:{submit:function(e){return e.preventDefault(),t.clickSubmit(e)}}},[n("v-text-field",{attrs:{label:"title"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),n("v-row",[n("v-col",{attrs:{cpls:"6"}},[n("v-textarea",{attrs:{label:"content"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),n("v-col",{attrs:{cols:"6"}},[n("Markdown-it-vue",{staticClass:"md-body",attrs:{content:t.form.content}})],1)],1),n("v-btn",{attrs:{type:"submit"}},[t._v("投稿")])],1)}),_t=[],It={components:{MarkdownItVue:dt.a},props:{form:{title:"",content:""}},methods:{clickSubmit:function(){this.$emit("submit")}}},wt=It,xt=n("4bd4"),$t=n("8654"),Vt=n("a844"),yt=Object(l["a"])(wt,bt,_t,!1,null,null,null),Lt=yt.exports;f()(yt,{VBtn:g["a"],VCol:w["a"],VForm:xt["a"],VRow:ot["a"],VTextField:$t["a"],VTextarea:Vt["a"]});var jt={components:{ArticleForm:Lt},data:function(){return{form:{title:"",content:""}}},methods:{postArticle:function(){var t=this;P.post("/blog/",{user:this.$store.getters.userId,title:this.form.title,content:this.form.content}).then((function(e){t.$router.replace("/"),console.log(e.data)}))}}},kt=jt,Ct=Object(l["a"])(kt,vt,ht,!1,null,null,null),Ot=Ct.exports;f()(Ct,{VContainer:at["a"]});var At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("ArticleForm",{attrs:{form:t.form},on:{submit:t.updateArticle}})],1)},Et=[],Ft={components:{ArticleForm:Lt},data:function(){return{form:{title:"",content:""}}},methods:{getArticle:function(){var t=this;P.get("/blog/"+this.$route.params.id).then((function(e){t.form.title=e.data.title,t.form.content=e.data.content}))},updateArticle:function(){var t=this;P.put("/blog/"+this.$route.params.id+"/",{user:this.$store.getters.userId,title:this.form.title,content:this.form.content}).then((function(){t.$router.replace("/article/"+t.$route.params.id)}))}},created:function(){this.getArticle()}},St=Ft,Mt=Object(l["a"])(St,At,Et,!1,null,null,null),Dt=Mt.exports;f()(Mt,{VContainer:at["a"]});var Pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-form",{on:{submit:function(e){return e.preventDefault(),t.submitLogin(e)}}},[n("v-text-field",{attrs:{label:"名前"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),n("v-text-field",{attrs:{label:"パスワード",type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),n("v-btn",{attrs:{type:"submit"}},[t._v("ログイン")])],1)],1)},Tt=[],Rt={data:function(){return{form:{username:"",password:""}}},methods:{submitLogin:function(){this.$store.dispatch("login",{username:this.form.username,password:this.form.password}),this.$router.replace("/")}}},Bt=Rt,qt=Object(l["a"])(Bt,Pt,Tt,!1,null,null,null),Ht=qt.exports;f()(qt,{VBtn:g["a"],VContainer:at["a"],VForm:xt["a"],VTextField:$t["a"]}),r["default"].use(E["a"]);var Jt=new E["a"]({mode:"history",routes:[{path:"/",component:it},{path:"/article/post",component:Ot},{path:"/article/:id",component:gt,name:"detail"},{path:"/article/:id/update",component:Dt,name:"update"},{path:"/login",component:Ht}]});function Ut(t,e,n){n({path:"/login",query:{next:t.fullPath}})}Jt.beforeEach((function(t,e,n){var r=R.getters.isLoggedIn,a=localStorage.getItem("access");console.log(r),null!=a&&R.dispatch("reload"),t.matched.some((function(t){return t.meta.requireAuth}))?r?n():null!=a?R.dispatch("reload").then((function(){n()})).catch((function(){Ut(t,e,n)})):Ut(t,e,n):n()}));var Wt=Jt,Xt=n("f309");r["default"].use(Xt["a"]);var Yt=new Xt["a"]({});r["default"].config.productionTip=!0,new r["default"]({router:Wt,store:R,vuetify:Yt,render:function(t){return t(A)}}).$mount("#app")},"7b35":function(t,e,n){},8107:function(t,e,n){"use strict";n("4a4e")},a2cc:function(t,e,n){},a308:function(t,e,n){"use strict";n("1f84")},c0d8:function(t,e,n){"use strict";n("d5ee")},d5ee:function(t,e,n){},e7e5:function(t,e,n){"use strict";n("7b35")},eea4:function(t,e,n){"use strict";n("39af")}});
//# sourceMappingURL=app.28e2dc88.js.map